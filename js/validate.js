/* *
 * 
 */

window.onload = function(){
    var sub = document.getElementById('submit');   
       
}

    function killClick(event){
        event.preventDefault();
        event.stopPropagation();
    }

    function inputCheck(){
        var log = document.getElementById('password').value;
        if(log.length<5){
//alert('In inputCheck if(log < 5) true - '+log.length) ;
            message('Количество символов не должно быть меньше 6');
               document.getElementById('submit').onclick = false;
           // killClick(event);
            return;
        }else{
//alert('In inputCheck if(log <5) false') ;
            document.getElementById('submit').click();           
          }
        }
        //.alert('value.length = '+log.length);      
    
  /*функция выводит на 5 секунд переданное сообщение на страницу в окне  */
    function message(msg){
        var elem = document.createElement('div');
        var txt = document.createTextNode(msg);
        elem.setAttribute('id','fish');
        elem.style.cssText ='position:absolute;\n\\n\
                                      bottom:10px;\n\
                                      left:320px;\n\
                                      width:300px;\n\
                                      height:40px;\n\
                                      background-color:#eee;\n\
                                      text-align:center;\n\
                                      padding-top:12px';
        
        elem.appendChild(txt);
        var parent_el = document.getElementById('cont');
        parent_el.appendChild(elem);
       // document.body.appendChild(elem);
        
        setTimeout(function(){ var parent_el = document.getElementById('cont');
            var del = document.getElementById('fish');
            parent_el.removeChild(del);},5000);
    }
    
/*создаем объект XMLHTTPrequest для работы с формой  и другого*/
   var xmlHttp = false;

   try {
     xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
   } catch (e) {
     try {
       xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
     } catch (e2) {
       xmlHttp = false;
     }
   }

   if (!xmlHttp && typeof XMLHttpRequest !== 'undefined') {
     xmlHttp = new XMLHttpRequest();
   }	
   
    /*соеденение с сервером  в параметрах передаем команду для контроллера и id дива
   куда будут вставленны полученные данные*/

   function callServer(target_name) {
 
    /*передаем через мссив GET[] параметры для файла index.php */	
             var url = 'index.php?'+encodeURI(target_name);//alert(decodeURI(url));
           // Открыть соединение с сервером
             xmlHttp.open("post", url, true);
            xmlHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            
            /*еэлементы чьё содержимое передается  на сервер*/ 
     //узнаем логин
     var login = document.getElementById('login').value;
     //узнаем пароль
      var pass = document.getElementById('password').value;
      
     var text = 'user='+login+'&password='+pass;
             // SПередать запрос
                   xmlHttp.send(text);
            
           // Установить функцию для сервера, которая выполнится после его ответа
             xmlHttp.onreadystatechange = function(){
   //alert('oneadystate = '+xmlHttp.readyState);
                             if (xmlHttp.readyState === 4) {
                           var response = xmlHttp.responseText;
                           /*берем элемент со страницы и вставляем во внутрь код/текст.
           НАДО понять какая вкладка открыта и вставить данные соотвтетствующие это вкладке
                   для этого проверяем какой текущий класс элемента "button_on" или "button_off"
                   и в зависимости от этого загружается соотвтетсвующая страница сервера 	*/

                                   document.documentElement.innerHTML = response;

                   }		  
           };
     
   } 
    

